version: "3.8"
services:
  gpu-jupyter:
    container_name: ml-base
    shm_size: 8gb
    restart: unless-stopped
    image: gpu-jupyter:latest
    deploy:
      resources:
        reservations:
          devices:
            - driver: nvidia
              count: 1
              capabilities: [gpu]
    volumes:
      - /home/surajt/projects/fastbook:/home/jovyan/work
    environment:
      GRANT_SUDO: "yes"
      JUPYTER_ENABLE_LAB: "yes"
      NB_UID: "1000"
      NB_GID: "1000"
    user:
      "root"

networks:
  default:
    external: true
    name: nexus